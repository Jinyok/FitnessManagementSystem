<?xml version="1.0" encoding="utf-8" ?>
<configuration>
	<configSections>
		<section name="log4net"
		type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
	</configSections>
	<log4net>
		<logger name="Logger">
			<level value="DEBUG"/>
			<appender-ref ref ="FileAppender"/>
			<appender-ref ref ="SQLAppender"/>
			<appender-ref ref ="ConsoleAppender"/>
		</logger>

		<appender name="ConsoleAppender"  type="log4net.Appender.ColoredConsoleAppender" >
			<mapping>
				<level value="INFO" />
				<forecolor value="Green" />
			</mapping>
			<mapping>
				<level value="WARN" />
				<forecolor value="Yellow,HighIntensity" />
			</mapping>
			<mapping>
				<level value="ERROR" />
				<forecolor value="Red,HighIntensity" />
			</mapping>
			<mapping>
				<level value="DEBUG" />
				<forecolor value="Blue" />
			</mapping>
			<layout type="log4net.Layout.PatternLayout">
				<param name="ConversionPattern"  value="=================================================================%n时间：%d %n线程：%t %n级别：%-5p %n位置：%location%n方法名：%M %n行号：%L%n操作信息：%m%n异常：%exception%n"/>
			</layout>
		</appender>

		<appender name ="FileAppender" type="log4net.Appender.RollingFileAppender,log4net">
			<param name="File" value="Log/"/>
			<param name="AppendToFile" value="true"/>
			<lockingModel type="log4net.Appender.FileAppender+MinimalLock"/>
			<Encoding value="UTF-8"/>
			<param name="MaxSizeRollBackups" value="10"/>
			<param name="maximumFileSize" value="500KB"/>
			<param name="CountDirection" value="1"/>
			<param name="StaticLogFileName" value="false"/>
			<param name="RollingStyle" value="Composite"/>
			<param name="DatePattern" value="yyyy-MM-dd/&quot;.txt&quot;"/>
			<layout type="log4net.Layout.PatternLayout">
				<param name="ConversionPattern" value="=================================================================
时间：%d 
													   %n线程：%t 
													   %n级别：%-5p 
													   %n位置：%location
													   %n方法名：%M 
													   %n行号：%L
													   %n操作信息：%m
													   %n异常：%exception"/>
			</layout>
		</appender>

		<appender name="SQLAppender" type="log4net.Appender.ADONetAppender,log4net">
			<bufferSize value="5" />
			<connectionType value="MySql.Data.MySqlClient.MySqlConnection, MySql.Data" />

			<connectionString value="server=localhost;user id=root;pwd=数据库密码;port=数据库端口号;pooling=True;database=写入的数据库名" providerName="MySql.Data.MySqlClient;" />
			<commandText value="INSERT INTO Log (Date,Thread,Level,Location,Message,Exception) VALUES (@log_date, @log_thread, @log_level,@log_location, @log_message,@exception)" />
			<parameter>
				<parameterName value="@log_date" />
				<dbType value="DateTime" />
				<layout type="log4net.Layout.RawTimeStampLayout" />
			</parameter>
			<parameter>
				<parameterName value="@log_thread" />
				<dbType value="String" />
				<size value="100" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%thread" />
				</layout>
			</parameter>
			<parameter>
				<parameterName value="@log_level" />
				<dbType value="String" />
				<size value="100" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%level" />
				</layout>
			</parameter>
			<parameter>
				<parameterName value="@log_location" />
				<dbType value="String" />
				<size value="2000" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%location" />
				</layout>
			</parameter>
			<parameter>
				<parameterName value="@log_message"/>
				<dbType value="String"/>
				<size value="4000"/>
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%message"/>
				</layout>
			</parameter>
			<parameter>
				<parameterName value="@exception" />
				<dbType value="String" />
				<size value="4000" />
				<layout type="log4net.Layout.ExceptionLayout" />
			</parameter>
		</appender>

	</log4net>
</configuration>